#{extends 'main.html' /}

#{set 'moreStyles'}
<link rel="stylesheet" href="@{'/public/css/admin-info.css'}">
<link rel="stylesheet" href="@{'/public/css/trumpet.css'}">
#{/set}
<style>
    .picture-container {
        display: inline-block;
    }

    .picture-container input, .picture-container label{
        display: block;
        width: 200px;
        margin: 0px 20px;
    }
    .picture-container .picture {
        width: 200px;
        height: 200px;
        margin: 20px;
    }

    .picture-container .picture .background{
        background: #dadada;
        width: 200px;
        height: 200px;
        position: absolute;
    }

    .picture-container .picture span{
        position: relative;
        width: 100%;
        height: 20%;
        display: none;
    }

    .picture-container .picture:hover span{
        position: relative;
        width: 100%;
        height: 20%;
        display: block;
        cursor: pointer;
        background: url("/public/images/delete.png") no-repeat center;
        background-size: 28px;
        background-color: rgba(191, 191, 191, 0.55);
    }

    .picture-container .picture img{
        max-width: 100%;
        max-height: 100%;
        margin: auto;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        position: absolute;
    }

    .a-button {
        background-color: #208bfe !important;
        color: #fff !important;
    }

    .a-button:hover{
        background-color: #107bee !important;
    }

    .swfupload {
        position: absolute;
        opacity: 0;
        background-color: red;
    }
</style>
<!-- 页头 begin -->
<div class="main-header">
    <div class="breadcrumb">
        <span class="nolink">编辑公告</span>
    </div>
</div>
<!-- 页头 end -->
<table width="100%">
    <tbody>
    <tr>
        <td i="body" class="ui-dialog-body">
            <div i="content" class="ui-dialog-content" id="content:createDialog">
                <div class="dialog">
                    <form action="@{ajax.NoticeCtrl.update}" id="update">
                        <input type="hidden" name="imgs" value="${imgsJson}">
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>公告内容</label>
                            <div class="col">
                                <input style="width: 400px" type="text" name="desc" value="${desc}">
                                <span class="msg error-text">必填项！</span>
                            </div>
                        </div>
                        <div class="form-group" id="pictureList">
                        </div>
                    </form>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td i="footer" class="ui-dialog-footer">
            <div i="button" class="ui-dialog-button">
                <span id="placeholder"></span>
                <button role="addImg" type="button" data-id="添加图片" autofocus="" class="a-button">添加图片</button>
                <button role="update" type="button" data-id="保存" autofocus="" class="ui-dialog-autofocus">保存</button>
            </div>
        </td>
    </tr>
    </tbody>
</table>

#{include file="common/jsinclude.html" /}

#{set 'moreScripts'}
<script id="pictureTmpl" type="text/html">
    <div class="picture-container">
        <div class="picture">
            <div class="background">
                <img class="picUrl" src="{picUrl}">
            </div>
            <span class="opt" role="delete"></span>
        </div>
        <label>点击链接</label>
        <input type="text" class="activityUrl" value="{activityUrl}">
        <label>排序</label>
        <input type="text" class="sortNum" value="{sortNum}">
    </div>
</script>

<script>
    var verNum = new Date();
    seajs.config({
        base:"../",
        // 加版本号
        map: [
            [ '.js', '.js?v='+verNum]
        ]
    });
    seajs.use("@{'/public/js/app/modules/notice.js'}");
    seajs.use("@{'/public/js/app/upload/noticeImgUpload.js'}");
    $(document).ready(function(){


    });
</script>
#{/set}