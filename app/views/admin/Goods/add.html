#{extends 'main.html' /}

#{set 'moreStyles'}
<link rel="stylesheet" href="@{'/public/css/admin-info.css'}">
<link rel="stylesheet" href="@{'/public/css/trumpet.css'}">
#{/set}
<style>
    #stockList, #iconList {
        height: 200px;
        width: 465px;
        overflow-y: scroll;
        box-shadow: 0px 0px 3px #9d9d9d;
    }
    .form-group {
        padding-left: 90px;
    }

    #fileUploadBox {
        height: 200px;
        width: 465px;
        overflow-y: scroll;
    }
    .ui-dialog-body-thin {
        padding: 0px;
    }
</style>
<!-- 页头 begin -->
<div class="main-header">
    <div class="breadcrumb">
        <span class="nolink">新增商品</span>
    </div>
</div>
<!-- 页头 end -->
<table style="width: 100%;">
    <tbody>
    <tr>
        <td i="body" class="ui-dialog-body ui-dialog-body-thin">
            <div i="content" class="ui-dialog-content" id="content:createDialog">
                <div class="dialog dialog-create">
                    <form action="@{ajax.GoodsCtrl.add}" id="create">
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>商品名称</label>
                            <div class="col">
                                <input type="text" name="goods.title" value="">
                                <span class="msg error-text">必填项！</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>详细描述</label>
                            <div class="col">
                                <input type="text" name="goods.goodsDesc" value="">
                                <span class="msg error-text">必填项！</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>价格(分)</label>
                            <div class="col">
                                <input type="text" name="goods.price" value="">
                                <span class="msg error-text">必填项！</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>温馨提示</label>
                            <div class="col">
                                <input type="text" name="goods.warmPrompt" value="">
                                <span class="msg error-text">必填项！</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="label"><span class="asterisk">*</span>状态</label>
                            <div class="col">
                                <select name="goods.state">
                                    <option value="0">下架</option>
                                    <option value="1">上架</option>
                                </select>
                            </div>
                        </div>
                        <div id="stockList">
                        </div>
                        <div i="button" class="ui-dialog-button">
                            <button role="addStock" type="button" data-id="添加库存" autofocus="" class="ui-dialog-autofocus">添加库存</button>
                        </div>
                    </form>
                </div>
            </div>
        </td>
        <td i="body" class="ui-dialog-body ui-dialog-body-thin">
            <div id="fileUploadBox">
                <div style="background-color: #C5D9FF; padding: 5px;">
                    <span id="spanButtonPlaceholder"></span>
                </div>
                <input id="btnUpload" type="button" value="上  传" onclick="startUploadFile();" class="btn3_mouseout"/>
                <div id="divFileProgressContainer"></div>
                <div id="thumbnails">
                    <table id="infoTable" border="0" width="530">
                    </table>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td i="footer" class="ui-dialog-footer">
            <div i="button" class="ui-dialog-button">
                <button role="submitAdd" type="button" data-id="保存" autofocus="" class="ui-dialog-autofocus">保存</button>
            </div>
        </td>
    </tr>
    </tbody>
</table>

#{include file="common/jsinclude.html" /}

#{set 'moreScripts'}
<script id="addGoodIconTmpl" type="text/html">
    <div>
            <input class="inputTmpl" type="hidden" name="" nameTmpl="goodsIcon[{index}].iconUrl" value="">
    </div>
</script>

<script id="addGoodStockTmpl" type="text/html">
    <div>
        <select name="goodsStock[{index}].goodsSize">
            #{list items:goodsSizes, as:'info'}
            <option value="${info.id}">${info.name}</option>
            #{/list}
        </select>
        <select name="goodsStock[{index}].goodsColor">
            #{list items:goodsColors, as:'info'}
            <option value="${info.id}">${info.name}</option>
            #{/list}
        </select>
        <input type="text" placeholder="描述" name="goodsStock[{index}].stockDesc">
        <input type="text" placeholder="库存" name="goodsStock[{index}].amount">
        <button type="button" class="btn_{index}" role="deleteStock">关闭</button>
    </div>
</script>

<script>
    var verNum = new Date();
    seajs.config({
        base:"../",
        // 加版本号
        map: [
            [ '.js', '.js?v='+verNum]
        ]
    });
    seajs.use("@{'/public/js/app/modules/goods.js'}");
    seajs.use("@{'/public/js/app/upload/fileUpload.js'}");
</script>
#{/set}