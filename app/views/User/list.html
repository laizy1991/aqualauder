#{extends 'main.html' /}

#{set 'moreStyles'}
    <link rel="stylesheet" href="@{'/public/css/admin-info.css'}">
    <link rel="shortcut icon" type="image/x-icon" href="@{'/public/images/favicon.ico'}" />

    <link rel="stylesheet" href="@{'/public/css/trumpet.css'}">
    <link rel="stylesheet" href="@{'/public/css/common.css'}">
#{/set}
     <style>

     </style>
<!-- 页头 begin -->
<div class="main-header">
    <div class="breadcrumb">
        <span class="nolink">用户列表</span>
    </div>
    <a class="btn btn-default" href="javascript:;" role="create">添加</a>
</div>
<!-- 页头 end -->

    <table class="tb">
        <thead>
        <tr  class="text-center">
            <th>用户id</th>
            <th>手机号码</th>
            <th>注册方式</th>
            <th>第三方平台ID</th>
            <th>昵称</th>
            <th>性别</th>
            <th>生日</th>
            <th class="order" role="contributeAsc">
                创建时间
            </th>
            <th class="order" role="contributeAsc">
                修改时间
            </th>
            <th>操作</th>
        </tr>
        </thead>
        #{if users == null || users.size() == 0 }
            <tr><td colspan="5" style="text-align:center;">暂无记录<td></tr>
        #{/if}
        #{else}
        #{list items:users, as:'info'}
        <tbody>
        <tr class="user-item">
            <input type="hidden" class="id" name="id" value="${info.userId}">
            <td>${info?.userId}</td>
            <td>${info?.mobile}</td>
            <td>${info?.openId}</td>
            <td>${info?.regType}</td>
            <td>${info?.nickname}</td>
            <td>${info?.sex}</td>
            <td>${info?.birthday}</td>
            <td>
                %{out.print(utils.DateUtil.getDateString(info?.createTime))}%
            </td>
            <td>%{out.print(utils.DateUtil.getDateString(info?.updateTime))}%</td>
            <td>
                <div class="opts">
                    <span class="opt" role="edit"><a href="javascript:;">修改</a></span>|
                    <span class="opt" role="delete"><a href="javascript:;">删除</a></span>
                </div>
            </td>
        </tr>
        </tbody>
        #{/list}
        #{/else}
    </table>

#{include file="common/jsinclude.html" /}

#{set 'moreScripts'}
<script type="text/javascript" src="@{'/public/js/thirdParty/bootstrap-3.3.4/js/jquery-2.1.3.min.js'}"></script>
<script type="text/javascript" src="@{'/public/js/lib/sea_2.1.1.js'}"></script>
<script type="text/javascript" src="@{'/public/js/thirdParty/bootstrap-3.3.4/js/bootstrap.min.js'}"></script>

<!-- 增加 -->
<script id="createDialogTmpl" type="text/html">
    <div class="dialog dialog-create">
        <form action="@{ajax.Users.add}" id="createUser">
            <div class="form-group">
                <label class="label"><span class="asterisk">*</span>姓名</label>
                <div class="col">
                    <input type="text" name="user.username" value="" style='width:150px'>
                    <span class="msg error-text">必填项！</span>
                </div>
            </div>
            <div class="form-group">
                <label class="label"><span class="asterisk">*</span>密码</label>
                <div class="col">
                    <input type="password" name="user.password" value="" style='width:150px'>
                    <span class="msg error-text">必填项！</span>
                </div>
            </div>
        </form>
    </div>
</script>

<!-- 删除 -->
<script id="deleteDialogTmpl" type="text/html">
    <div class="dialog dialog-create">
        <form action="@{ajax.Users.delete}" id="deleteUser">
            <div class="form-group">
                <input type="hidden" class="in-t" id="userIdOnDelete" name="user.id" value="">
                <label class="label">确定删除？</label>
            </div>
        </form>
    </div>
</script>

编辑
<script id="editDialogTmpl" type="text/html">
    <div class="dialog dialog-create">
        <form action="@{ajax.Users.update}" id="updateUser">
            <div class="form-group">
                <input type="hidden" class="in-t" id="userIdOnUpdate" name="user.id" value="">
                <label class="label">确定修改？<strong id="usernameOnUpdate"></strong></label>
            </div>
            <div class="form-group">
                <label class="label"><span class="asterisk">*</span>密码</label>
                <div class="col">
                    <input type="password" name="user.password" id="password" value="" style='width:150px'>
                    <span class="msg error-text">必填项！</span>
                </div>
            </div>
            </form>
    </div>
</script>

    <script>
        var verNum = new Date();
        seajs.config({
            base:"../",
            // 加版本号
            map: [
                [ '.js', '.js?v='+verNum]
            ]
        });
        seajs.use("@{'/public/js/app/modules/users.js'}");
    </script>
#{/set}